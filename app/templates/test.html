<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Carga</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f0f0f0;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            max-width: 600px;
            margin: 0 auto;
        }
        .check {
            padding: 10px;
            margin: 10px 0;
            border-left: 4px solid #28a745;
            background: #d4edda;
        }
        .error {
            border-left-color: #dc3545;
            background: #f8d7da;
        }
        code {
            background: #f5f5f5;
            padding: 2px 5px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Test de Carga - Aplicaci√≥n Web</h1>
        
        <div id="status"></div>
        
        <h2>Informaci√≥n del Sistema</h2>
        <div id="info"></div>
    </div>

    <script>
        console.log('=== INICIANDO TEST ===');
        
        // Test 1: Verificar que document est√° listo
        console.log('‚úì Document cargado');
        document.getElementById('status').innerHTML += '<div class="check">‚úì Document est√° listo</div>';
        
        // Test 2: Verificar variables globales
        if (typeof currentFilename !== 'undefined') {
            console.log('‚úì currentFilename definido:', currentFilename);
            document.getElementById('status').innerHTML += '<div class="check">‚úì currentFilename definido</div>';
        } else {
            console.error('‚úó currentFilename no definido');
            document.getElementById('status').innerHTML += '<div class="check error">‚úó currentFilename no definido</div>';
        }
        
        // Test 3: Verificar funciones
        const functionsToCheck = ['showTab', 'previewImage', 'predictImage', 'updateThreshold'];
        functionsToCheck.forEach(func => {
            if (typeof window[func] === 'function') {
                console.log(`‚úì ${func} definido`);
                document.getElementById('status').innerHTML += `<div class="check">‚úì ${func} definido</div>`;
            } else {
                console.error(`‚úó ${func} NO definido`);
                document.getElementById('status').innerHTML += `<div class="check error">‚úó ${func} NO definido</div>`;
            }
        });
        
        // Test 4: Info del sistema
        const info = `
            <p><strong>User Agent:</strong> <code>${navigator.userAgent}</code></p>
            <p><strong>Origen:</strong> <code>${window.location.origin}</code></p>
            <p><strong>Ruta:</strong> <code>${window.location.pathname}</code></p>
            <p><strong>Scripts cargados:</strong></p>
            <ul>
                ${Array.from(document.scripts).map(s => `<li><code>${s.src || 'inline'}</code></li>`).join('')}
            </ul>
        `;
        document.getElementById('info').innerHTML = info;
        
        // Test 5: Intentar cargar script.js manualmente
        console.log('Cargando script.js...');
        const script = document.createElement('script');
        script.src = '/static/script.js';
        script.onload = function() {
            console.log('‚úì script.js cargado exitosamente');
            document.getElementById('status').innerHTML += '<div class="check">‚úì script.js cargado</div>';
            
            // Re-verificar funciones
            setTimeout(() => {
                if (typeof showTab === 'function') {
                    console.log('‚úì showTab disponible despu√©s de carga');
                    document.getElementById('status').innerHTML += '<div class="check">‚úì showTab disponible</div>';
                }
            }, 100);
        };
        script.onerror = function() {
            console.error('‚úó Error cargando script.js');
            document.getElementById('status').innerHTML += '<div class="check error">‚úó Error cargando script.js</div>';
        };
        document.head.appendChild(script);
        
        console.log('=== TEST FINALIZADO ===');
    </script>
</body>
</html>
