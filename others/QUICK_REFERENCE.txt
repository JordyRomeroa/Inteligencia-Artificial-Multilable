â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        QUICK REFERENCE CARD                                   â•‘
â•‘                  MLflow Retraining - Sistema Corregido                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ INICIO RÃPIDO (Copy-Paste Listo)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Terminal 1: Validar que TODO estÃ¡ OK
python validate_mlflow_config.py

# Terminal 2: Hacer test (conll reentrenamiento real)
python test_retrain_flow.py

# Terminal 3: Ver en MLflow UI
mlflow ui --backend-store-uri file:///c:/Users/jordy/OneDrive/Desktop/iaaaa/iajordy2/runs/mlflow --port 5001

# Terminal 4: Iniciar servidor API
python app/run_server.py

# Terminal 5: Test de API (copiar completo)
curl -X POST http://localhost:5000/api/model/retrain ^
  -H "Content-Type: application/json" ^
  -d {\"epochs\": 3, \"experiment_id\": \"401576597529460193\"}


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… CHECK POINTS: 4 VERIFICACIONES CLAVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. ConfiguraciÃ³n Correcta
   â””â”€ python validate_mlflow_config.py
      âœ“ DEBE mostrar: âœ“âœ“âœ“ TODAS LAS VALIDACIONES PASARON âœ“âœ“âœ“

2. Flujo Funcional
   â””â”€ python test_retrain_flow.py
      âœ“ DEBE mostrar: âœ… TEST COMPLETADO EXITOSAMENTE

3. MLflow GuardÃ³ Correctamente
   â””â”€ python verification_checklist.py
      âœ“ DEBE mostrar: âœ… TODAS LAS VERIFICACIONES PASARON

4. API Funciona
   â””â”€ curl + POST a /api/model/retrain
      âœ“ DEBE retornar: "success": true


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ CONFIGURÃ PARÃMETROS DE REENTRENAMIENTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

POST http://localhost:5000/api/model/retrain

Payload JSON:
{
  "epochs": 5,                              # NÃºmero de Ã©pocas (default: 5)
  "batch_size": 16,                         # TamaÃ±o del batch (default: 16)
  "experiment_id": "401576597529460193"     # OBLIGATORIO (no cambiar)
}

Ejemplo:
{
  "epochs": 10,
  "batch_size": 8,
  "experiment_id": "401576597529460193"
}

Respuesta exitosa:
{
  "success": true,
  "experiment_id": "401576597529460193",
  "mlflow_run_id": "abc123def456...",
  "new_version": 1,
  "metrics": {
    "mAP50": 0.78,
    "mAP50-95": 0.65
  },
  "mlflow_message": "âœ“ MLflow run registrado en experiment 401576597529460193"
}


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ RUTAS CLAVE (Bookmark These!)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Modelos Reentrenados:
  C:\Users\jordy\OneDrive\Desktop\iaaaa\iajordy2\models\retrained_v*.pt

MLflow Artifacts:
  C:\Users\jordy\OneDrive\Desktop\iaaaa\iajordy2\runs\mlflow\401576597529460193\

Dataset de Reentrenamiento:
  C:\Users\jordy\OneDrive\Desktop\iaaaa\iajordy2\data\retrain_v*/

Correcciones Guardadas:
  C:\Users\jordy\OneDrive\Desktop\iaaaa\iajordy2\data\corrections\

API:
  http://localhost:5000/api/model/retrain

MLflow UI:
  http://localhost:5001


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš¡ TROUBLESHOOTING: Problemas Comunes & Soluciones RÃ¡pidas
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Problema: "validate_mlflow_config.py falla"
SoluciÃ³n: 
  1. Verificar que experiment 401576597529460193 existe
  2. Si no existe, ejecutar SETUP_INSTRUCTIONS.md
  3. Leer el error especÃ­fico y seguir indicaciones

Problema: "No hay suficientes correcciones"
SoluciÃ³n:
  1. Ir a http://localhost:5000/advanced
  2. Hacer correcciones manuales (mÃ­nimo 5)
  3. O ejecutar: python test_retrain_flow.py

Problema: "Permission denied en directorio"
SoluciÃ³n:
  1. Cerrar MLflow UI
  2. Cerrar cualquier pythonexe usando los archivos
  3. Reintentar

Problema: "curl no funciona en Windows"
SoluciÃ³n:
  1. Usar PowerShell en lugar de cmd:
     powershell -Command "curl.exe -X POST ..."
  2. O usar este batch script:
     @echo off
     curl -X POST http://localhost:5000/api/model/retrain ^
       -H "Content-Type: application/json" ^
       -d "{\"epochs\": 5}"

Problema: "MLflow UI muestra datos vacÃ­os"
SoluciÃ³n:
  1. Cerrar MLflow UI
  2. Esperar 5 segundos
  3. Reabrir http://localhost:5001
  4. Refresh en navegador (Ctrl+R)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“– DOCUMENTACIÃ“N RÃPIDA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Si necesitas...           â†’ Lee esto...              â†’ Tiempo

Empezar rÃ¡pido           â†’ QUICK_START.md            â†’ 5 min
Entender el problema     â†’ MLFLOW_FIX_EXPLANATION.md â†’ 30 min
Detalles tÃ©cnicos        â†’ README_MLFLOW_CORRECTION.md â†’ 20 min
Pre-requisitos setup     â†’ SETUP_INSTRUCTIONS.md     â†’ 10 min
Validar que funciona     â†’ Ejecuta los 4 scripts    â†’ 10 min total
Estado actual            â†’ RESUMEN.txt             â†’ 5 min


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’¡ CONCEPTOS CLAVE (Entender la soluciÃ³n)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

experiment_id (Obligatorio)
  â€¢ Identifica Ãºnico experimento en MLflow
  â€¢ DEBE ser: 401576597529460193
  â€¢ Si no existe, MLflow falla (asÃ­ lo queremos)

artifact_location (ExplÃ­cito)
  â€¢ DÃ³nde MLflow guarda los artifacts
  â€¢ DEBE ser: file:///c:/Users/jordy/OneDrive/Desktop/iaaaa/iajordy2/runs/mlflow/401576597529460193/
  â€¢ Set ANTES de usar experiment

Artifacts (Lo que se guarda)
  â€¢ models/retrained_v*.pt â†’ Modelo entrenado
  â€¢ retraining_dataset/ â†’ Dataset de reentrenamiento
    â””â”€ corrections_applied.json â†’ Correcciones usadas
    â””â”€ retraining_dataset_metadata.json â†’ Metadata
    â””â”€ data.yaml â†’ ConfiguraciÃ³n
  â€¢ plots/ â†’ GrÃ¡ficas de entrenamiento
  â€¢ config/ â†’ ConfiguraciÃ³n (args.yaml)

Tags (Metadatos)
  â€¢ type=retraining â†’ Indica que es un reentrenamiento
  â€¢ experiment_id â†’ Rastrear experimento
  â€¢ Permite filtrar runs por tipo

MÃ©tricas (Lo que se mide)
  â€¢ mAP50, mAP50-95 â†’ PrecisiÃ³n de detecciÃ³n
  â€¢ precision, recall â†’ Standard ML metrics
  â€¢ val_* â†’ MÃ©tricas de validaciÃ³n
  â€¢ retraining_dataset_samples â†’ Muestras usadas


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ CHECKLIST PRE-REENTRENAMIENTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Antes de cada reentrenamiento:

â–¡ Â¿Tengo >= 5 correcciones en data/corrections/?
â–¡ Â¿validate_mlflow_config.py pasÃ³ todas las pruebas?
â–¡ Â¿MLflow UI muestra experiment 401576597529460193?
â–¡ Â¿API estÃ¡ iniciada (python app/run_server.py)?
â–¡ Â¿Modelo base existe en models/best_improved.pt?
â–¡ Â¿Hay espacio disco en C:\ (necesito ~1GBÃ—Ã©pocas)?

Si TODOS son âœ“, estÃ¡ seguro hacer reentrenamiento.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š CHECKLIST POST-REENTRENAMIENTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DespuÃ©s de cada reentrenamiento:

â–¡ Â¿Modelo guardado en models/retrained_vX.pt?
â–¡ Â¿File size > 30MB (verificar que no estÃ¡ vacÃ­o)?
â–¡ Â¿MLflow UI muestra nuevo run con tag retraining?
â–¡ Â¿Artifacts incluyen corrections_applied.json?
â–¡ Â¿MÃ©tricas mAP50 y precision > 0?
â–¡ Â¿verification_checklist.py pasÃ³ todas las pruebas?

Si TODOS son âœ“, reentrenamiento fue exitoso.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” GARANTÃAS DE LA CORRECCIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Experiment ID: FORZADO a 401576597529460193
   â†’ No se pueden crear experimentos nuevos accidentalmente

âœ… Artifact Location: EXPLÃCITO y ANTES de run
   â†’ Garantiza guardado en ruta exacta

âœ… Dataset Guardado: corrections_applied.json SIEMPRE
   â†’ Reproducibilidad 100% garantizada

âœ… MÃ©tricas Completas: PRE y POST siempre registradas
   â†’ AuditorÃ­a completa del reentrenamiento

âœ… Sin Conflictos MLflow: Flujo limpio sin env vars
   â†’ Predicible y mantenible

âœ… Cada Run es Nuevo: No sobrescribe anteriores
   â†’ Historial completo preservado


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ SOPORTE QUICK REFERENCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ejecutar (en este orden si algo falla):

1. python validate_mlflow_config.py
   â†’ Diagnostica 98% de los problemas

2. python test_retrain_flow.py
   â†’ Test end-to-end del flujo completo

3. python verification_checklist.py
   â†’ Verifica quÃ© exactamente guardÃ³ MLflow

4. Leer MLFLOW_FIX_EXPLANATION.md
   â†’ Si los scripts no resuelven el problema

5. Revisar los logs de las terminal donde corren scripts
   â†’ Output detallado de cada paso


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â±ï¸ TIMING REFERENCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Tarea                           Tiempo TÃ­pico
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
validate_mlflow_config.py       30 segundos
test_retrain_flow.py (2 epochs)  5 minutos (con GPU)
verification_checklist.py        10 segundos
MLflow UI startup               2 segundos
API startup                     1-2 segundos

TOTAL SETUP INICIAL:            ~10 minutos (una sola vez)
TOTAL POR REENTRENAMIENTO:      5-10 min (depende de epochs)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Estado: ğŸŸ¢ PRODUCCIÃ“N READY

Para comenzar ahora:

$ python validate_mlflow_config.py

Si pasa âœ“:
$ python test_retrain_flow.py

Si pasa âœ“:
$ mlflow ui --backend-store-uri file:///c:/Users/jordy/OneDrive/Desktop/iaaaa/iajordy2/runs/mlflow --port 5001

Luego: http://localhost:5001

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
